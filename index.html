<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestra Historia - Patri & Juanjo</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;900&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #ff4d6d;
            --glass: rgba(255, 255, 255, 0.1);
            --chat-bg-in: #202c33;
            --chat-bubble-out: #005c4b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
        }

        /* --- Scroll Snapping --- */
        .scroll-container {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scrollbar-width: none;
        }
        .scroll-container::-webkit-scrollbar { display: none; }

        section {
            height: 100vh;
            width: 100vw;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 20px;
            text-align: center;
            overflow: hidden;
            transition: background 1s ease;
        }

        /* --- FONDOS --- */
        .bg-1 { background: linear-gradient(180deg, #111, #2a0a10); } /* Portada */
        .bg-chat { background: #0b141a; } /* Chat WhatsApp */
        .bg-stats-1 { background: linear-gradient(180deg, #2a0a10, #4a0e1c); } /* Magnitud */
        .bg-stats-2 { background: linear-gradient(180deg, #4a0e1c, #700f28); } /* Word Cloud */
        .bg-stats-3 { background: linear-gradient(180deg, #700f28, #9e1b32); } /* 2023 */
        .bg-stats-4 { background: linear-gradient(180deg, #9e1b32, #c92a42); } /* R√©cord */
        .bg-stats-5 { background: linear-gradient(180deg, #c92a42, #5e1124); } /* Nocturnos */
        .bg-stats-6 { background: linear-gradient(180deg, #5e1124, #2d0014); } /* Competencia */
        .bg-stats-7 { background: linear-gradient(180deg, #2d0014, #1a050b); } /* Constancia */
        .bg-family { background: linear-gradient(180deg, #1a050b, #2e020a); } /* Gatas */
        
        /* TRANSICI√ìN A LINKIN PARK (Azules Noche) */
        .bg-lp-1 { background: linear-gradient(180deg, #2e020a, #0f172a); }
        .bg-lp-2 { background: linear-gradient(180deg, #0f172a, #1e293b); }
        .bg-lp-3 { background: linear-gradient(180deg, #1e293b, #0f172a); }
        .bg-final { background: #000; }

        /* --- TEXTOS --- */
        h1 { font-size: 2.2rem; font-weight: 900; text-transform: uppercase; margin-bottom: 15px; letter-spacing: -1px; line-height: 1.2; }
        h2 { font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--accent); margin: 10px 0; }
        p { font-size: 1.1rem; opacity: 0.9; margin: 8px 0; line-height: 1.5; font-weight: 300; max-width: 600px; }
        
        .big-number { 
            font-size: 3.5rem; font-weight: 900; display: block; margin: 10px 0; 
            text-shadow: 0 4px 15px rgba(255, 77, 109, 0.4);
        }

        /* --- CHAT SIMULATION --- */
        .chat-container { width: 100%; max-width: 380px; display: flex; flex-direction: column; gap: 10px; font-family: Helvetica, Arial, sans-serif; font-size: 0.9rem; }
        .msg { padding: 8px 12px; border-radius: 8px; max-width: 85%; text-align: left; box-shadow: 0 1px 1px rgba(0,0,0,0.3); opacity: 0; transform: translateY(20px); }
        .msg-in { align-self: flex-start; background: #202c33; color: white; border-top-left-radius: 0; }
        .msg-out { align-self: flex-end; background: #005c4b; color: white; border-top-right-radius: 0; }
        .msg-time { font-size: 0.65rem; color: rgba(255,255,255,0.6); text-align: right; margin-top: 4px; }
        
        section.active .msg:nth-child(1) { animation: popIn 0.5s forwards 0.5s; }
        section.active .msg:nth-child(2) { animation: popIn 0.5s forwards 2.5s; }
        section.active .msg:nth-child(3) { animation: popIn 0.5s forwards 5.0s; }
        section.active .msg:nth-child(4) { animation: popIn 0.5s forwards 6.5s; }
        @keyframes popIn { to { opacity: 1; transform: translateY(0); } }

        /* --- ELEMENTOS DE DATOS --- */
        .stat-card { background: var(--glass); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); width: 90%; max-width: 400px; margin: 10px 0; }
        
        .word-cloud { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 20px 0; }
        .tag { padding: 6px 12px; border-radius: 15px; background: rgba(255,255,255,0.2); font-weight: bold; }

        .bar-wrap { width: 100%; max-width: 350px; margin: 10px 0; }
        .progress { height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden; }
        .fill { height: 100%; width: 0; transition: width 2s ease-out; }

        /* --- FOTOS (Polaroid) --- */
        .polaroid { background: white; padding: 10px 10px 35px 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); transform: rotate(-3deg); transition: transform 0.5s; margin: 20px 0; }
        .polaroid img { width: 100%; max-width: 280px; display: block; }
        .polaroid:hover { transform: rotate(0deg) scale(1.05); }

        /* --- ESTRELLAS --- */
        .stars { position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; opacity: 0; transition: opacity 2s; }
        .slide-stars.active .stars { opacity: 1; }
        .star { position: absolute; background: white; border-radius: 50%; animation: twinkle 3s infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.8; } 50% { opacity: 0.2; } }

        /* --- BOT√ìN M√öSICA --- */
        .music-btn { position: fixed; top: 20px; right: 20px; z-index: 100; background: rgba(255, 77, 109, 0.9); border: none; color: white; padding: 10px 20px; border-radius: 30px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }

        /* --- ANIMACIONES GENERALES --- */
        .content { opacity: 0; transform: translateY(30px); transition: all 0.8s ease; }
        section.active .content { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body>

    <button class="music-btn" onclick="togglePlay()">üéµ M√öSICA</button>
    <div id="player"></div>

    <div class="scroll-container">
        
        <section class="bg-1 active">
            <div class="content">
                <p>Nuestra Historia</p>
                <h1>Patri & Juanjo</h1>
                <p>18 de Junio de 2023</p>
                <div style="margin-top: 40px; font-size: 2rem; animation: bounce 2s infinite;">üëá</div>
            </div>
        </section>

        <section class="bg-chat">
            <div class="content">
                <p style="margin-bottom: 20px; opacity: 0.7;">C√≥mo empez√≥ todo...</p>
                <div class="chat-container">
                    <div class="msg msg-out">Buenas! Siento la intrusi√≥n. Soy Juanjo amigo de √örsula...<div class="msg-time">23:10</div></div>
                    <div class="msg msg-out">Por lo visto somos gente de bien y majos que deber√≠amos conocernos üòÑ<div class="msg-time">23:10</div></div>
                    <div class="msg msg-in">Hola Juanjo!! Ninguna intrusi√≥n jajaja<div class="msg-time">23:28</div></div>
                    <div class="msg msg-in">√örsula ejerciendo de Celestina... üòÇ<div class="msg-time">23:29</div></div>
                </div>
            </div>
        </section>

        <section class="bg-stats-1">
            <div class="content">
                <h1>Magnitud</h1>
                <p>Y desde ese "Hola"...</p>
                <div class="stat-card">
                    <span class="big-number counter" data-target="55188">0</span>
                    <p>Mensajes</p>
                </div>
                <div class="stat-card">
                    <span class="big-number counter" data-target="568830">0</span>
                    <p>Palabras</p>
                </div>
                <p style="font-size: 0.9rem; margin-top: 15px;">Ni uno solo fue casualidad.</p>
            </div>
        </section>

        <section class="bg-stats-2">
            <div class="content">
                <h1>Nuestro Mundo</h1>
                <div class="word-cloud">
                    <span class="tag" style="background:var(--accent)">Gij√≥n üåä</span>
                    <span class="tag">Monta√±a ‚õ∞Ô∏è</span>
                    <span class="tag">Risas üòÇ</span>
                    <span class="tag" style="background:var(--accent)">Vinito üç∑</span>
                    <span class="tag">Jajajaja</span>
                </div>
                <p>Palabras que construyen una vida.</p>
            </div>
        </section>

        <section class="bg-stats-3">
            <div class="content">
                <h1>2023</h1>
                <p>No fue un a√±o.</p>
                <h2 style="font-size: 2.5rem; color: #fff;">Fue una revoluci√≥n.</h2>
                <span class="big-number counter" data-target="41409" style="color: var(--accent);">0</span>
                <p>Mensajes en un solo a√±o.</p>
            </div>
        </section>

        <section class="bg-stats-4">
            <div class="content">
                <p>R√©cord Hist√≥rico</p>
                <h1>9 de Julio</h1>
                <span class="big-number counter" data-target="1931">0</span>
                <p>Mensajes en un d√≠a.</p>
                <div style="margin-top: 20px; font-style: italic; border-left: 3px solid white; padding-left: 10px;">
                    "Eso no fue hablar.<br>Fue sentir sin pausa."
                </div>
            </div>
        </section>

        <section class="bg-stats-5">
            <div class="content">
                <h1>Nocturnos</h1>
                <div style="font-size: 4rem;">üåô</div>
                <p>Nuestra hora favorita:</p>
                <div class="big-number" style="font-family: monospace; font-size: 2.5rem;">23:00</div>
                <p><strong>7.507 mensajes</strong><br>cuando el mundo dorm√≠a.</p>
            </div>
        </section>

        <section class="bg-stats-6">
            <div class="content">
                <h1>El Marcador</h1>
                <div class="bar-wrap">
                    <div style="display:flex; justify-content:space-between;"><span>Patri ‚ù§Ô∏è</span> <span>29.556</span></div>
                    <div class="progress"><div class="fill" style="width: 53%; background: #ff4d6d;"></div></div>
                </div>
                <div class="bar-wrap">
                    <div style="display:flex; justify-content:space-between;"><span>JJ</span> <span>25.631</span></div>
                    <div class="progress"><div class="fill" style="width: 47%; background: #fff;"></div></div>
                </div>
                <div class="stat-card" style="margin-top: 20px;">
                    <span style="font-size: 2.5rem;">üòò</span>
                    <p>Enviado <span class="counter" data-target="12147">0</span> veces.</p>
                </div>
            </div>
        </section>

        <section class="bg-stats-7">
            <div class="content">
                <h1>Constancia</h1>
                <p>Durante <strong>970 d√≠as</strong>...</p>
                <div class="stat-card">
                    <span class="big-number counter" data-target="57">0</span>
                    <p>Mensajes al d√≠a (Media)</p>
                </div>
                <p>Todos los d√≠as. Incluso los dif√≠ciles.</p>
            </div>
        </section>

        <section class="bg-family">
            <div class="content">
                <h1>Hogar</h1>
                <p>No solo llegaste t√∫...</p>
                
                <div class="polaroid">
                    <img src="gatas.jpg" alt="La Familia">
                </div>

                <p>Llegaron ellas y la certeza de que somos una <strong>familia</strong>.</p>
            </div>
        </section>

        <section class="bg-lp-1 slide-stars">
            <div class="stars"></div>
            <div class="content">
                <p>Pero entre tantos n√∫meros y recuerdos...</p>
                <h1 style="margin-top: 20px; color: #a2d2ff;">Hay una promesa.</h1>
            </div>
        </section>

        <section class="bg-lp-2 slide-stars">
            <div class="stars"></div>
            <div class="content">
                <p style="font-family: 'Great Vibes'; font-size: 2.5rem;">"In the sky of a million stars..."</p>
                <div style="margin-top: 40px;"></div>
                <p style="font-family: 'Great Vibes'; font-size: 2.5rem;">"It flickers, flickers..."</p>
            </div>
        </section>

        <section class="bg-lp-3 slide-stars">
            <div class="stars"></div>
            <div class="content">
                <h1 style="font-size: 2.5rem; text-transform: none; line-height: 1.4;">Who cares if one more light goes out?</h1>
                <p style="opacity: 0.6; margin-top: 20px;">Linkin Park</p>
            </div>
        </section>

        <section class="bg-lp-3 slide-stars">
            <div class="stars"></div>
            <div class="content">
                <h1 style="font-size: 3.5rem; color: var(--accent);">Well, I do.</h1>
                <p style="max-width: 500px; margin-top: 30px; font-size: 1.2rem;">
                    Me da igual lo que digan los n√∫meros. Lo √∫nico que me importa es cuidar de tu luz.
                </p>
                <p style="font-weight: bold; margin-top: 15px;">Siempre.</p>
            </div>
        </section>

        <section class="bg-final">
            <div class="content">
                <div class="polaroid" style="transform: rotate(2deg);">
                    <img src="foto.jpg" alt="Nosotros">
                </div>
                <p style="font-style: italic; margin-top: 10px;">"Si cada mensaje fuera un latido, esto ser√≠a un coraz√≥n imposible de parar."</p>
                <h2 style="margin-top: 20px;">Te Quiero ‚ù§Ô∏è</h2>
                <h1 style="font-size: 1.5rem;">Feliz San Valent√≠n</h1>
            </div>
        </section>

    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // 1. ESTRELLAS
        function createStars() {
            const containers = document.querySelectorAll('.stars');
            containers.forEach(cont => {
                for(let i=0; i<60; i++) {
                    const s = document.createElement('div');
                    s.className = 'star';
                    s.style.left = Math.random()*100 + '%';
                    s.style.top = Math.random()*100 + '%';
                    s.style.width = Math.random()*3 + 'px';
                    s.style.height = s.style.width;
                    s.style.animationDelay = Math.random()*2 + 's';
                    cont.appendChild(s);
                }
            });
        }
        createStars();

        // 2. M√öSICA
        let player;
        let isPlaying = false;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0', width: '0', videoId: 'Tm8LGxTLtQk',
                playerVars: { 'playlist': 'Tm8LGxTLtQk', 'loop': 1 }
            });
        }
        function togglePlay() {
            const btn = document.querySelector('.music-btn');
            if(!isPlaying) {
                player.playVideo(); isPlaying = true; btn.innerText = "‚è∏ PAUSAR";
            } else {
                player.pauseVideo(); isPlaying = false; btn.innerText = "üéµ M√öSICA";
            }
        }

        // 3. ANIMACIONES
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('active');
                    // Contadores
                    entry.target.querySelectorAll('.counter').forEach(c => {
                        const target = +c.getAttribute('data-target');
                        animateValue(c, 0, target, 2500);
                        c.classList.remove('counter');
                    });
                    // Barras
                    entry.target.querySelectorAll('.fill').forEach(f => f.style.width = f.style.width);
                } else {
                    entry.target.classList.remove('active');
                }
            });
        }, { threshold: 0.3 });

        document.querySelectorAll('section').forEach(s => observer.observe(s));

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString('es-ES');
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        const style = document.createElement('style');
        style.innerHTML = `@keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }`;
        document.head.appendChild(style);
    </script>
</body>
</html>
