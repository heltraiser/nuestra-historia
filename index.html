<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestra Historia - Patri & Juanjo</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;900&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #ff4d6d;
            --glass: rgba(255, 255, 255, 0.1);
            --chat-bg-in: #202c33;
            --chat-bubble-in: #005c4b;
            --chat-bubble-out: #202c33;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
        }

        /* --- Scroll Snapping --- */
        .scroll-container {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scrollbar-width: none;
        }
        .scroll-container::-webkit-scrollbar { display: none; }

        section {
            height: 100vh;
            width: 100vw;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 20px;
            text-align: center;
            overflow: hidden;
            transition: background 1s ease;
        }

        /* --- FONDOS --- */
        .bg-start { background: linear-gradient(180deg, #111, #2a0a10); }
        .bg-chat { background: #0b141a; } /* Color WhatsApp oscuro */
        .bg-stats { background: linear-gradient(180deg, #2a0a10, #5c0a1e); }
        .bg-family { background: linear-gradient(180deg, #5c0a1e, #8f122e); }
        .bg-love { background: linear-gradient(180deg, #8f122e, #1e1e2e); }
        .bg-song { background: linear-gradient(180deg, #1e1e2e, #0f172a); }
        .bg-final { background: #000; }

        /* --- TIPOGRAF√çA --- */
        h1 { font-size: 2.2rem; font-weight: 900; text-transform: uppercase; margin-bottom: 15px; letter-spacing: -1px; line-height: 1.2; }
        h2 { font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--accent); margin: 10px 0; }
        p { font-size: 1.1rem; opacity: 0.9; margin: 10px 0; line-height: 1.6; font-weight: 300; max-width: 600px; }
        
        /* --- ESTILO WHATSAPP (EL FLASHBACK) --- */
        .chat-container {
            width: 100%; max-width: 380px;
            display: flex; flex-direction: column; gap: 10px;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 0.9rem;
        }
        .msg {
            padding: 8px 12px;
            border-radius: 8px;
            max-width: 85%;
            position: relative;
            text-align: left;
            box-shadow: 0 1px 1px rgba(0,0,0,0.3);
            opacity: 0; /* Para animar */
            transform: translateY(20px);
        }
        .msg-in { align-self: flex-start; background: #202c33; color: white; border-top-left-radius: 0; }
        .msg-out { align-self: flex-end; background: #005c4b; color: white; border-top-right-radius: 0; }
        .msg-time { font-size: 0.65rem; color: rgba(255,255,255,0.6); text-align: right; margin-top: 4px; }
        
        /* Animaci√≥n Chat: Aparecen uno a uno */
        section.active .msg:nth-child(1) { animation: popIn 0.5s forwards 0.5s; }
        section.active .msg:nth-child(2) { animation: popIn 0.5s forwards 2.5s; } /* Lee JJ */
        section.active .msg:nth-child(3) { animation: popIn 0.5s forwards 5.5s; } /* Lee Patri */
        section.active .msg:nth-child(4) { animation: popIn 0.5s forwards 7.0s; } /* Lee Patri */

        @keyframes popIn { to { opacity: 1; transform: translateY(0); } }

        /* --- ESTILO FOTOS (Polaroid) --- */
        .polaroid {
            background: white; padding: 10px 10px 30px 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transform: rotate(-3deg);
            transition: transform 0.5s;
            margin: 20px 0;
        }
        .polaroid img { width: 100%; max-width: 280px; display: block; filter: sepia(20%); }
        .polaroid:hover { transform: rotate(0deg) scale(1.05); }

        /* --- ELEMENTOS DE DATOS --- */
        .big-number { font-size: 3.5rem; font-weight: 900; display: block; margin: 10px 0; text-shadow: 0 0 20px var(--accent); }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; max-width: 400px; }
        .stat-card { background: var(--glass); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); }

        /* --- ESTRELLAS Y MAGIA --- */
        .stars { position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; opacity: 0; transition: opacity 2s; }
        .slide-stars.active .stars { opacity: 1; }
        .star { position: absolute; background: white; border-radius: 50%; animation: twinkle 3s infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.8; } 50% { opacity: 0.2; } }

        /* --- BOT√ìN M√öSICA --- */
        .music-btn { position: fixed; top: 20px; right: 20px; z-index: 100; background: rgba(255, 77, 109, 0.9); border: none; color: white; padding: 10px 20px; border-radius: 30px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }

        /* --- ANIMACIONES GENERALES --- */
        .content { opacity: 0; transform: translateY(30px); transition: all 1s ease; }
        section.active .content { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body>

    <button class="music-btn" onclick="togglePlay()">üéµ M√öSICA</button>
    <div id="player"></div>

    <div class="scroll-container">
        
        <section class="bg-start active">
            <div class="content">
                <p>Nuestra Historia</p>
                <h1>Patri & Juanjo</h1>
                <p>Todo tiene un comienzo...</p>
                <div style="margin-top: 40px; font-size: 2rem; animation: bounce 2s infinite;">üëá</div>
            </div>
        </section>

        <section class="bg-chat">
            <div class="content">
                <p style="margin-bottom: 20px; opacity: 0.7;">18 de Junio de 2023, 23:10</p>
                
                <div class="chat-container">
                    <div class="msg msg-out">
                        Buenas! Siento la intrusi√≥n. Soy Juanjo, amigo de √örsula...
                        <div class="msg-time">23:10</div>
                    </div>
                    <div class="msg msg-out">
                        Por lo visto somos gente de bien y majos que deber√≠amos conocernos üòÑ
                        <div class="msg-time">23:10</div>
                    </div>
                    <div class="msg msg-in">
                        Hola Juanjo!! Ninguna intrusi√≥n jajaja
                        <div class="msg-time">23:28</div>
                    </div>
                    <div class="msg msg-in">
                        √örsula ejerciendo de Celestina... üòÇ
                        <div class="msg-time">23:29</div>
                    </div>
                </div>
                <p style="margin-top: 30px; font-size: 0.9rem;">(Gracias √örsula ‚ù§Ô∏è)</p>
            </div>
        </section>

        <section class="bg-stats">
            <div class="content">
                <h1>Y explot√≥ todo</h1>
                <p>Desde ese "Hola", hemos creado un universo:</p>
                <div class="stat-grid">
                    <div class="stat-card">
                        <span class="big-number counter" data-target="55188">0</span>
                        <p>Mensajes</p>
                    </div>
                    <div class="stat-card">
                        <span class="big-number counter" data-target="970">0</span>
                        <p>D√≠as</p>
                    </div>
                </div>
                <div class="stat-card" style="width: 100%; margin-top: 15px;">
                    <span class="big-number counter" data-target="568830">0</span>
                    <p>Palabras escritas</p>
                </div>
            </div>
        </section>

        <section class="bg-family">
            <div class="content">
                <h1>Nuestra Familia</h1>
                <p>No solo llegaste t√∫...</p>
                
                <div class="polaroid">
                    <img src="gatas.jpg" alt="Nuestras Gatinas">
                </div>

                <p>Me trajiste a las gatinas y con ellas, la sensaci√≥n de <strong>HOGAR</strong>.</p>
                <p style="font-size: 0.9rem; opacity: 0.8;">(Mis chicas favoritas)</p>
            </div>
        </section>

        <section class="bg-love">
            <div class="content">
                <h1>Lo que compartimos</h1>
                <div style="font-size: 1.2rem; line-height: 2; margin: 20px 0;">
                    Las escapadas a la <strong>Monta√±a</strong> ‚õ∞Ô∏è<br>
                    Nuestros <strong>Vinitos</strong> üç∑<br>
                    La vida en <strong>Gij√≥n</strong> üåä<br>
                    Y esas charlas a las <strong>23:00</strong> üåô
                </div>
                <p>Incluso el d√≠a que escribimos <strong>1.931 mensajes</strong>.</p>
            </div>
        </section>

        <section class="bg-song slide-stars">
            <div class="stars"></div>
            <div class="content">
                <p>Pero m√°s all√° de los n√∫meros y los viajes...</p>
                <h1 style="margin-top: 20px; color: #a2d2ff;">Hay una promesa.</h1>
            </div>
        </section>

        <section class="bg-song slide-stars">
            <div class="stars"></div>
            <div class="content">
                <p style="font-family: 'Great Vibes'; font-size: 2.5rem;">"In the kitchen, one more chair than you need..."</p>
                <br>
                <h1 style="font-size: 2rem; text-transform: none; line-height: 1.4;">Who cares if one more light goes out?</h1>
            </div>
        </section>

        <section class="bg-song slide-stars">
            <div class="stars"></div>
            <div class="content">
                <h1 style="font-size: 4rem; color: var(--accent);">Well, I do.</h1>
                <p style="max-width: 500px; margin-top: 30px; font-size: 1.3rem; line-height: 1.6;">
                    A m√≠ s√≠ me importa. <br>
                    Cuidar de ti, de nosotras, de nuestra familia.<br>
                    Esa es mi prioridad.
                </p>
            </div>
        </section>

        <section class="bg-final">
            <div class="content">
                <div class="polaroid" style="transform: rotate(2deg);">
                    <img src="foto.jpg" alt="Nosotros">
                </div>
                <p style="font-style: italic; margin-top: 10px;">"Si cada mensaje fuera un latido, esto ser√≠a un coraz√≥n imposible de parar."</p>
                <h2 style="margin-top: 20px;">Te Quiero ‚ù§Ô∏è</h2>
                <h1 style="font-size: 1.5rem;">Feliz San Valent√≠n</h1>
            </div>
        </section>

    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // 1. ESTRELLAS
        function createStars() {
            const containers = document.querySelectorAll('.stars');
            containers.forEach(cont => {
                for(let i=0; i<60; i++) {
                    const s = document.createElement('div');
                    s.className = 'star';
                    s.style.left = Math.random()*100 + '%';
                    s.style.top = Math.random()*100 + '%';
                    s.style.width = Math.random()*3 + 'px';
                    s.style.height = s.style.width;
                    s.style.animationDelay = Math.random()*2 + 's';
                    cont.appendChild(s);
                }
            });
        }
        createStars();

        // 2. M√öSICA
        let player;
        let isPlaying = false;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0', width: '0', videoId: 'Tm8LGxTLtQk',
                playerVars: { 'playlist': 'Tm8LGxTLtQk', 'loop': 1 }
            });
        }
        function togglePlay() {
            const btn = document.querySelector('.music-btn');
            if(!isPlaying) {
                player.playVideo(); isPlaying = true; btn.innerText = "‚è∏ PAUSAR";
            } else {
                player.pauseVideo(); isPlaying = false; btn.innerText = "üéµ M√öSICA";
            }
        }

        // 3. ANIMACIONES
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('active');
                    // Contadores
                    entry.target.querySelectorAll('.counter').forEach(c => {
                        const target = +c.getAttribute('data-target');
                        animateValue(c, 0, target, 2500);
                        c.classList.remove('counter');
                    });
                } else {
                    entry.target.classList.remove('active');
                }
            });
        }, { threshold: 0.3 });

        document.querySelectorAll('section').forEach(s => observer.observe(s));

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString('es-ES');
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        // CSS Animaci√≥n Flecha
        const style = document.createElement('style');
        style.innerHTML = `@keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }`;
        document.head.appendChild(style);
    </script>
</body>
</html>
