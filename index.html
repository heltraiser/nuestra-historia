<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestra Historia - Patri & Juanjo</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700;900&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #ff4d6d;
            --deep-blue: #0f1c2e; /* Color Linkin Park / Noche */
            --glass: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
        }

        /* --- Scroll Snapping --- */
        .scroll-container {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scrollbar-width: none;
        }
        .scroll-container::-webkit-scrollbar { display: none; }

        section {
            height: 100vh;
            width: 100vw;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 25px;
            text-align: center;
            overflow: hidden;
            transition: background 1s ease;
        }

        /* --- FONDOS DIN츼MICOS --- */
        /* FASE 1: DATOS (Rojos y Intensos) */
        .slide-intro { background: linear-gradient(180deg, #1a050b, #4a0e1c); }
        .slide-stats { background: linear-gradient(180deg, #4a0e1c, #800f2f); }
        .slide-record { background: linear-gradient(180deg, #800f2f, #5e1124); }
        .slide-fun { background: linear-gradient(180deg, #5e1124, #2d0014); }
        
        /* FASE 2: EMOCI칍N (Azul Noche / One More Light) */
        .slide-transition { background: linear-gradient(180deg, #2d0014, #0f1c2e); }
        .slide-song { background: linear-gradient(180deg, #0f1c2e, #1e3c5e); }
        .slide-promise { background: linear-gradient(180deg, #1e3c5e, #0f1c2e); }
        .slide-final { background: #000; }

        /* --- TEXTOS Y ELEMENTOS --- */
        h1 { font-size: 2.2rem; font-weight: 900; text-transform: uppercase; margin-bottom: 15px; line-height: 1.1; }
        h2 { font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--accent); margin: 10px 0; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        p { font-size: 1.1rem; opacity: 0.9; margin: 8px 0; line-height: 1.5; font-weight: 300; }
        
        .big-number { 
            font-size: 3.5rem; font-weight: 900; display: block; 
            background: -webkit-linear-gradient(#fff, #ffccd5); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin: 5px 0; filter: drop-shadow(0 4px 5px rgba(255, 77, 109, 0.3));
        }

        /* Cajas de Datos */
        .stat-grid { display: grid; grid-template-columns: 1fr; gap: 15px; width: 100%; max-width: 400px; }
        .stat-card { background: var(--glass); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); }

        /* Gr치fico de Barras */
        .bar-wrap { width: 100%; max-width: 350px; margin: 10px 0; }
        .bar-label { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 5px; }
        .progress { height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px; overflow: hidden; }
        .fill { height: 100%; width: 0; transition: width 2s ease-out; }

        /* Foto Final */
        .final-img {
            width: 80vw; max-width: 320px; aspect-ratio: 1/1;
            object-fit: cover; border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 77, 109, 0.3);
            border: 3px solid rgba(255,255,255,0.8);
            margin-bottom: 20px;
        }

        /* Animaciones */
        .content { opacity: 0; transform: translateY(30px); transition: all 0.8s ease; }
        section.active .content { opacity: 1; transform: translateY(0); }

        /* Estrellas para la secci칩n Linkin Park */
        .stars { position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; z-index: 0; opacity: 0; transition: opacity 2s; }
        .slide-song.active .stars, .slide-promise.active .stars { opacity: 1; }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0.8; animation: twinkle 3s infinite; }

        @keyframes twinkle { 0%, 100% { opacity: 0.8; } 50% { opacity: 0.2; } }

        /* Bot칩n M칰sica */
        .music-btn {
            position: fixed; top: 20px; right: 20px; z-index: 100;
            background: rgba(255,255,255,0.15); backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3); color: white;
            padding: 10px 18px; border-radius: 30px; font-weight: 700; font-size: 12px;
            display: flex; align-items: center; gap: 8px; cursor: pointer;
        }
    </style>
</head>
<body>

    <button class="music-btn" onclick="togglePlay()">
        <span>游꿧</span> <span id="btn-text">PLAY MUSIC</span>
    </button>
    <div id="player"></div>

    <div class="scroll-container">
        
        <section class="slide-intro active">
            <div class="content">
                <p>Nuestra Historia</p>
                <h1>Todo empez칩 el<br>18 Jun 2023</h1>
                <p>Y desde entonces...</p>
                <h2>No hemos parado.</h2>
                <div style="margin-top: 40px; font-size: 2rem; animation: bounce 2s infinite;">游녢</div>
            </div>
        </section>

        <section class="slide-stats">
            <div class="content">
                <h1>Magnitud</h1>
                <div class="stat-grid">
                    <div class="stat-card">
                        <span class="big-number counter" data-target="55188">0</span>
                        <p>Mensajes totales</p>
                    </div>
                    <div class="stat-card">
                        <span class="big-number counter" data-target="568830">0</span>
                        <p>Palabras escritas</p>
                    </div>
                </div>
                <p style="margin-top: 20px;">Y ni una sola fue casualidad.</p>
            </div>
        </section>

        <section class="slide-record">
            <div class="content">
                <p>2023 no fue un a침o, fue una revoluci칩n.</p>
                <div class="stat-card" style="margin: 20px 0;">
                    <h1>9 de Julio</h1>
                    <span class="big-number counter" data-target="1931">0</span>
                    <p>Mensajes en un solo d칤a</p>
                </div>
                <div style="border-left: 3px solid var(--accent); padding-left: 15px; text-align: left; margin-top: 20px;">
                    <p style="font-style: italic;">"Eso no fue hablar.<br>Fue sentir sin pausa."</p>
                </div>
            </div>
        </section>

        <section class="slide-fun">
            <div class="content">
                <h1>23:00 h</h1>
                <p>Nuestra hora m치gica.</p>
                <p>7.507 mensajes mientras el mundo dorm칤a.</p>
                
                <div style="margin-top: 40px;">
                    <p>Constancia:</p>
                    <span class="big-number counter" data-target="57">0</span>
                    <p>Mensajes al d칤a (Media)</p>
                    <p style="font-size: 0.9rem; opacity: 0.7;">Todos los d칤as. Incluso los dif칤ciles.</p>
                </div>
            </div>
        </section>

        <section class="slide-fun">
            <div class="content">
                <h1>El Marcador</h1>
                
                <div class="bar-wrap">
                    <div class="bar-label"><span>Patri 仇벒잺</span> <span>29.556</span></div>
                    <div class="progress"><div class="fill" style="width: 53%; background: #ff4d6d;"></div></div>
                </div>
                
                <div class="bar-wrap">
                    <div class="bar-label"><span>JJ</span> <span>25.631</span></div>
                    <div class="progress"><div class="fill" style="width: 47%; background: #fff;"></div></div>
                </div>

                <div class="stat-card" style="margin-top: 30px;">
                    <div style="font-size: 4rem;">游땢</div>
                    <p>Enviado <span class="counter" data-target="12147">0</span> veces.</p>
                    <p style="font-weight: bold; color: var(--accent);">Nuestro idioma.</p>
                </div>
            </div>
        </section>

        <section class="slide-transition">
            <div class="stars"></div>
            <div class="content">
                <p>Pero entre tantos n칰meros...</p>
                <h1 style="margin-top: 20px;">Hay una verdad<br>m치s importante.</h1>
            </div>
        </section>

        <section class="slide-song">
            <div class="stars"></div>
            <div class="content">
                <p style="font-family: 'Great Vibes'; font-size: 2rem; color: #a2d2ff;">"In the sky of a million stars..."</p>
                <div style="margin: 30px 0;">
                    <h1 style="font-size: 2.5rem; text-transform: none;">Who cares if one more light goes out?</h1>
                </div>
                <p style="opacity: 0.7;">Linkin Park</p>
            </div>
        </section>

        <section class="slide-promise">
            <div class="stars"></div>
            <div class="content">
                <h1 style="font-size: 3rem; color: var(--accent);">Well, I do.</h1>
                <p style="max-width: 400px; margin-top: 20px;">
                    Me da igual lo que digan los n칰meros. Lo 칰nico que me importa es cuidar de tu luz.
                </p>
                <p style="font-weight: bold; margin-top: 10px;">Siempre.</p>
            </div>
        </section>

        <section class="slide-final">
            <div class="content">
                <img src="foto.jpg" alt="Nosotros" class="final-img">
                <p>"Si cada mensaje fuera un latido, esto ser칤a un coraz칩n imposible de parar."</p>
                
                <h2 style="margin-top: 20px;">Te quiero 仇벒잺</h2>
                <h1 style="font-size: 1.5rem; margin-top: 10px;">Seguir칤a eligi칠ndote.</h1>
            </div>
        </section>

    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // --- 1. FONDO DE ESTRELLAS (Para la parte rom치ntica) ---
        function createStars() {
            const starContainers = document.querySelectorAll('.stars');
            starContainers.forEach(container => {
                for(let i=0; i<50; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.width = Math.random() * 3 + 'px';
                    star.style.height = star.style.width;
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.animationDelay = Math.random() * 2 + 's';
                    container.appendChild(star);
                }
            });
        }
        createStars();

        // --- 2. LOGICA MUSICA ---
        let player;
        let isPlaying = false;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0', width: '0', videoId: 'Tm8LGxTLtQk', // One More Light
                playerVars: { 'playlist': 'Tm8LGxTLtQk', 'loop': 1 }
            });
        }
        function togglePlay() {
            const btnText = document.getElementById('btn-text');
            if (!isPlaying) { 
                player.playVideo(); 
                isPlaying = true; 
                btnText.innerText = 'PAUSAR';
            } else { 
                player.pauseVideo(); 
                isPlaying = false; 
                btnText.innerText = 'PLAY MUSIC'; 
            }
        }

        // --- 3. ANIMACIONES Y SCROLL ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    
                    // Animar n칰meros
                    const counters = entry.target.querySelectorAll('.counter');
                    counters.forEach(counter => {
                        const target = +counter.getAttribute('data-target');
                        animateValue(counter, 0, target, 2500);
                        counter.classList.remove('counter'); 
                    });

                    // Animar Barras
                    const bars = entry.target.querySelectorAll('.fill');
                    bars.forEach(bar => { bar.style.width = bar.style.width; });
                } else {
                    entry.target.classList.remove('active');
                }
            });
        }, { threshold: 0.4 });

        document.querySelectorAll('section').forEach(s => observer.observe(s));

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                // Usar Math.floor para enteros y toLocaleString para puntos (55.188)
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString('es-ES');
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        // --- 4. CSS PARA ANIMACION DE FLECHA ---
        const style = document.createElement('style');
        style.innerHTML = `@keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }`;
        document.head.appendChild(style);
    </script>
</body>
</html>
